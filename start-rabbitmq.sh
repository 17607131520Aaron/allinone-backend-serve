#!/bin/bash

echo "ğŸš€ å¯åŠ¨RabbitMQæœåŠ¡..."

# æ£€æŸ¥Dockeræ˜¯å¦è¿è¡Œ
if ! docker info > /dev/null 2>&1; then
    echo "âŒ Dockeræœªè¿è¡Œï¼Œè¯·å…ˆå¯åŠ¨Docker"
    exit 1
fi

# å¯åŠ¨RabbitMQæœåŠ¡
echo "ğŸ“¦ å¯åŠ¨RabbitMQå®¹å™¨..."
docker-compose up -d rabbitmq

# ç­‰å¾…RabbitMQå¯åŠ¨
echo "â³ ç­‰å¾…RabbitMQæœåŠ¡å¯åŠ¨..."
sleep 10

# æ£€æŸ¥RabbitMQçŠ¶æ€
if docker-compose ps rabbitmq | grep -q "Up"; then
    echo "âœ… RabbitMQæœåŠ¡å¯åŠ¨æˆåŠŸï¼"
    echo "ğŸŒ AMQPç«¯å£: 5672"
    echo "ğŸ”§ ç®¡ç†ç•Œé¢: http://localhost:15672"
    echo "ğŸ‘¤ ç”¨æˆ·å: guest"
    echo "ğŸ” å¯†ç : guest"
else
    echo "âŒ RabbitMQæœåŠ¡å¯åŠ¨å¤±è´¥"
    docker-compose logs rabbitmq
    exit 1
fi

echo ""
echo "ğŸ¯ ç°åœ¨å¯ä»¥å¯åŠ¨ä½ çš„åº”ç”¨äº†ï¼š"
echo "   pnpm run dev"
